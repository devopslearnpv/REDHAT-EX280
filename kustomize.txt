**** Make the folder structure********
Open your terminal and run:
mkdir -p kustomize-demo/base
mkdir -p kustomize-demo/overlays/dev
mkdir -p kustomize-demo/overlays/staging
mkdir -p kustomize-demo/overlays/prod

Your tree will look like:
kustomize-demo/
â”œâ”€â”€ base/
â””â”€â”€ overlays/
 Â Â Â â”œâ”€â”€ dev/
 Â Â Â â”œâ”€â”€ staging/
 Â Â Â â””â”€â”€ prod/

Add Base resources
Go to kustomize-demo/base/ and create:
âœ… base/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
 Â name: my-app
spec:
 Â replicas: 1
 Â selector:
 Â Â Â matchLabels:
 Â Â Â Â Â app: my-app
 Â template:
 Â Â Â metadata:
 Â Â Â Â Â labels:
 Â Â Â Â Â Â Â app: my-app
 Â Â Â spec:
 Â Â Â Â Â containers:
 Â Â Â Â Â - name: my-app
 Â Â Â Â Â Â Â image: nginx:latest
 Â Â Â Â Â Â Â ports:
 Â Â Â Â Â Â Â - containerPort: 80
---
âœ… base/service.yaml
apiVersion: v1
kind: Service
metadata:
 Â name: my-app-service
spec:
 Â selector:
 Â Â Â app: my-app
 Â ports:
 Â - protocol: TCP
 Â Â Â port: 80
 Â Â Â targetPort: 80
 Â type: ClusterIP
---
âœ… base/kustomization.yaml
resources:
 Â - deployment.yaml
 Â - service.yaml
---
âœ… Base is DONE âœ…
---
Add Overlays
Now letâ€™s customize for dev, staging, prod.
Each overlay will patch the number of replicas and the image tag.
âœ… overlays/dev/
overlays/dev/patch-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
 Â name: my-app
spec:
 Â replicas: 2
 Â template:
 Â Â Â spec:
 Â Â Â Â Â containers:
 Â Â Â Â Â - name: my-app
 Â Â Â Â Â Â Â image: nginx:1.25-alpine
overlays/dev/kustomization.yaml
resources:
 Â - ../../base
patchesStrategicMerge:
 Â - patch-deployment.yaml
---
âœ… overlays/staging/
overlays/staging/patch-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
 Â name: my-app
spec:
 Â replicas: 3
 Â template:
 Â Â Â spec:
 Â Â Â Â Â containers:
 Â Â Â Â Â - name: my-app
 Â Â Â Â Â Â Â image: nginx:1.25

overlays/staging/kustomization.yaml
resources:
 Â - ../../base
patchesStrategicMerge:
 Â - patch-deployment.yaml
---



âœ… overlays/prod/



overlays/prod/patch-deployment.yaml



apiVersion: apps/v1
kind: Deployment
metadata:
 Â name: my-app
spec:
 Â replicas: 5
 Â template:
 Â Â Â spec:
 Â Â Â Â Â containers:
 Â Â Â Â Â - name: my-app
 Â Â Â Â Â Â Â image: nginx:stable

overlays/prod/kustomization.yaml



resources:
 Â - ../../base
patchesStrategicMerge:
 Â - patch-deployment.yaml





---



âœ… 4ï¸âƒ£ Folder Tree You Now Have



kustomize-demo/

â”œâ”€â”€ base/

â”‚Â Â Â â”œâ”€â”€ deployment.yaml

â”‚Â Â Â â”œâ”€â”€ service.yaml

â”‚Â Â Â â””â”€â”€ kustomization.yaml

â””â”€â”€ overlays/

 Â Â Â â”œâ”€â”€ dev/

 Â Â Â â”‚Â Â Â â”œâ”€â”€ kustomization.yaml

 Â Â Â â”‚Â Â Â â””â”€â”€ patch-deployment.yaml

 Â Â Â â”œâ”€â”€ staging/

 Â Â Â â”‚Â Â Â â”œâ”€â”€ kustomization.yaml

 Â Â Â â”‚Â Â Â â””â”€â”€ patch-deployment.yaml

 Â Â Â â””â”€â”€ prod/

 Â Â Â Â Â Â Â â”œâ”€â”€ kustomization.yaml

 Â Â Â Â Â Â Â â””â”€â”€ patch-deployment.yaml





---



ğŸŒŸ 5ï¸âƒ£ How to Build and See the Output



âœ… For dev:



kustomize build kustomize-demo/overlays/dev



âœ… For staging:



kustomize build kustomize-demo/overlays/staging



âœ… For prod:



kustomize build kustomize-demo/overlays/prod



Youâ€™ll see different replicas and images in each output.





---



ğŸŒŸ 6ï¸âƒ£ How to Apply to a Cluster (Optional)



If you have Kubernetes access:



kubectl apply -k kustomize-demo/overlays/dev



(Replace dev with staging or prod as needed)





---



ğŸŒŸ 7ï¸âƒ£ Summary



âœ… Base = shared manifests

âœ… Overlays = environment-specific patches

âœ… Easy to extend with:



ConfigMaps



Secrets



Labels



Namespaces



Image tags







---



ğŸ If you want...



Just tell me:



â­ "Give me a zip of all these" (I can give you a single text archive to copy-paste) â­ "Add ConfigMaps"

â­ "Add Secrets"

â­ "Add namespace definitions"

â­ "Explain kustomize generators"



â€” and Iâ€™ll help you step by step!





---



If you're ready, just reply:



âœ… â€œIâ€™m ready for the next stepâ€

âœ… Or tell me what part you want to do next!